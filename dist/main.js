(()=>{"use strict";var t={171:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=o(509),c=o(536);r.initializeApp({credential:r.credential.cert(c)}),console.log("Contectado a Firebase");const n=r.firestore();e.default=n},603:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(185));!async function(){try{await c.default.connect("mongodb://localhost:27017/tu-pc-gamer"),console.log("Connected to MongoDb")}catch(t){console.log(t)}}()},776:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(171));e.default=class{collection;constructor(t){this.collection=c.default.collection(t)}async getAll(){try{return(await this.collection.get()).docs.map((t=>({id:t.id,...t.data()})))}catch(t){return console.log(t),[]}}async getById(t){try{const e=this.collection.doc(t);return(await e.get()).data()}catch(t){console.log(t)}}async deleteAll(){try{const t=(await this.collection.get()).docs.delete();return console.log("Archivo vaciado"),t}catch(t){console.log("No se encontró el archivo",t)}}async deleteById(t){try{const e=this.collection.doc(t);return await e.delete()}catch(t){console.log(t)}}}},994:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(185));e.default=class{collection;constructor(t,e){this.collection=c.default.model(t,e)}async getAll(){try{return await this.collection.find({})}catch(t){return console.log(t),[]}}async deleteAll(){try{await await this.collection.deleteMany({}),console.log("Archivo vaciado")}catch(t){console.log("No se encontró el archivo",t)}}async getById(t){try{return await this.collection.findById(t)}catch(t){console.log(t)}}async deleteById(t){try{return await this.collection.findByIdAndDelete(t)}catch(t){console.log(t)}}}},87:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeProductFromACart=e.addProductToACart=e.showProducts=e.deleteCart=e.createCart=void 0;const r=o(971);e.createCart=async(t,e)=>{const o=await r.cartDao.save();o?e.json(o):e.json({error:"no se pudo guardar el producto"})},e.deleteCart=async(t,e)=>{try{const o=await r.cartDao.deleteById(t.params.id);e.json({deletedItem:o})}catch(t){e.json({error:t})}},e.showProducts=async(t,e)=>{try{const o=await r.cartDao.getById(t.params.id);o||e.send({error:"carrito no encontrado"}),e.send(o.products)}catch(t){e.send(t)}},e.addProductToACart=async(t,e)=>{try{const o=await r.cartDao.addProduct(t.params.id,t.params.id_item);o?e.json(o):e.json({error:"no se pudo guardar el producto"})}catch(t){e.send(t)}},e.removeProductFromACart=async(t,e)=>{try{const o=await r.cartDao.removeProduct(t.params.id,t.params.id_item);o?e.json(o):e.json({error:"no se pudo guardar el producto"})}catch(t){e.send(t)}}},320:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.deleteProduct=e.editProduct=e.createProduct=e.getProductById=e.getProducts=void 0;const r=o(971);e.getProducts=async(t,e)=>{try{const t=await r.productDao.getAll();e.send(t)}catch(t){e.send(t)}},e.getProductById=async(t,e)=>{try{const o=await r.productDao.getById(t.params.id);o||e.send({error:"producto no encontrado"}),e.send(o)}catch(t){e.send(t)}},e.createProduct=async(t,e)=>{try{const o=await r.productDao.save(t.body);o?e.json(o):e.json({error:"no se pudo guardar el producto"})}catch(t){e.send(t)}},e.editProduct=async(t,e)=>{try{const o=await r.productDao.edit(t.params.id,t.body);o?e.json(o):e.json({error:"no se pudo guardar el producto"})}catch(t){e.send(t)}},e.deleteProduct=async(t,e)=>{try{const o=await r.productDao.deleteById(t.params.id);e.json({deletedItem:o})}catch(t){e.json({error:t})}}},974:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(776)),n=r(o(171)),a=o(594);class d extends c.default{constructor(){super("carts")}async save(){return this.collection.doc().create({products:[]})}async addProduct(t,e){try{const o=n.default.collection("products").doc(e);console.log(o);const r=this.collection.doc(t);return console.log(r),await r.update({products:a.FieldValue.arrayUnion(o)})}catch(t){return console.log(t),null}}async removeProduct(t,e){try{const o=this.collection.doc(t);return await o.update({products:a.FieldValue.arrayRemove(e)})}catch(t){return console.log(t),null}}}e.default=d},534:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=o(971),n=r(o(994));class a extends n.default{constructor(){super("Cart",{products:{type:[Object],default:[]}})}async save(){const t=new this.collection;try{return t.save()}catch(t){return console.log(t),null}}async addProduct(t,e){try{const o=await c.productDao.getById(e);return this.collection.findByIdAndUpdate(t,{$push:{products:o}})}catch(t){return null}}async removeProduct(t,e){try{return await this.collection.findByIdAndUpdate(t,{$pull:{products:{_id:e}}})}catch(t){return console.log(t),null}}}e.default=a},971:function(t,e,o){var r=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o);var c=Object.getOwnPropertyDescriptor(e,o);c&&!("get"in c?!e.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,r,c)}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return c(e,t),e};let a,d;Object.defineProperty(e,"__esModule",{value:!0}),e.cartDao=e.productDao=void 0,e.productDao=a,e.cartDao=d,(async()=>{const{default:t}=await Promise.resolve().then((()=>n(o(928))));e.productDao=a=new t;const{default:r}=await Promise.resolve().then((()=>n(o(974))));e.cartDao=d=new r})()},928:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(776));class n extends c.default{constructor(){super("products")}async save(t){try{const e=this.collection.doc().create(t);return console.log(e.id),e}catch(t){return console.log(t),null}}async edit(t,e){try{const o=this.collection.doc(t);return await o.update(e)}catch(t){return console.log(t),null}}}e.default=n},385:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(994));class n extends c.default{constructor(){super("Product",{title:{type:String,require:!0},price:{type:Number,require:!0},thumbnail:{type:String,required:!0}})}async save(t){const e=new this.collection(t);try{return await e.save(t)}catch(t){return console.log(t),null}}async edit(t,e){try{return this.collection.findByIdAndUpdate(t,e)}catch(t){return console.log(t),null}}}e.default=n},519:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(860)),n=r(o(208)),a=r(o(741)),d=(0,c.default)();d.use(c.default.json(),c.default.urlencoded({extended:!0})),d.use("/api/products",n.default),d.use("/api/cart",a.default),d.use("*",((t,e)=>{e.status(404).send({error:-2,desc:"path not found"})})),d.listen(8080,(()=>{console.log("Servidor corriendo en el puerto 8080")}))},208:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(860)),n=o(320),a=c.default.Router(),d=async(t,e,o)=>{o()};a.get("/",n.getProducts),a.get("/:id",n.getProductById),a.post("/",d,n.createProduct),a.put("/:id",d,n.editProduct),a.delete("/:id",d,n.deleteProduct),e.default=a},741:function(t,e,o){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=r(o(860)),n=o(87),a=c.default.Router();a.post("/",n.createCart),a.delete("/:id",n.deleteCart),a.get("/:id/products",n.showProducts),a.post("/:id/products/:id_item",n.addProductToACart),a.delete("/:id/products/:id_item",n.removeProductFromACart),e.default=a},860:t=>{t.exports=require("express")},509:t=>{t.exports=require("firebase-admin")},594:t=>{t.exports=require("firebase-admin/firestore")},185:t=>{t.exports=require("mongoose")},536:t=>{t.exports=JSON.parse('{"type":"service_account","project_id":"tu-pc-gamer","private_key_id":"60fcac6c1c939d5c1389ac0be296bb0cce753284","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDVfQcQObe+BRcC\\nPW/iGNxmoDT6Fjx8KGJPQz0SoL5xOKoZIsEg4SN11CAjuc8VLztyd++TK6kR2aBC\\n6rMFaJQrZpTsR24c51ssputO9D2DAfxwQjTVEuE84ziTCMne/xJt4idNxzbbF0i7\\nOhgezH6aT5mvqh5T3xhLgMfz65fPwFfAB68mwiRFcnUcULeoJnhYZ9ZdG0ynfje2\\nweaQGjfmSMoP+6J3vDOCBcq4QcNTnzIztg7BwPwxczQg5OGUv5pPcYZkVUrIYCIT\\ng3rFwsvdSvvT+u304RK8WB+U7MMk0JYF1Fz7WJZjEoPmM/o8WFvAOtCYh0tBbguO\\n/gLzVb51AgMBAAECggEANk7NXq/IEZMa5Mt7LDF107d6con4jf757z7kCNqSR5wK\\nDUXdij8rdZxmJqBsUO/IeBiRfcc0BaHuVkd9DemqE5ZPWQHcvYaPF39Iybdw9GQr\\ncuUsqm1YldQZfrHUJKGPbxuCMxNz3W0BZ/thymfr5tZL+rdUarKMbByRAPhUEJle\\n6DrqE4Tcjm5c1Nh4bHTh5RSfbBGOW6OTSg8BYiGm7RV4TN8oS12oQVHdGIui7DPR\\ni/3/9JKkH1HHb9OKUVWiPGHt23DR0OyKw87puNvbreDqRUBYLZ57LEw/TJ9HWTH/\\nJptoJfCwcXR+Le4+6ZWrrkFYuU+51Yta19oHq74X+wKBgQDqJ9mOB9XvG9wltuf9\\nMV1KLJB0180GDii0pPLky5nLTlha7zszT9eoKhLJ+SmppvLvOMg2knizCcFI25ey\\nvKLxfYF6m96rAT5bdJ8Vjg8CvfT6/SyQOc+0qxuk8ofrK/G4ri/SPQDoDkbLXkOk\\nUEAYTRg0cG8JgLJABfBwWd5L0wKBgQDpZ5kVb62vt991vlAlzt5GAuU/OJ7Y8x5y\\ntr7mWxfMXMiWliFRRglToFVdOgT3v7e+Zz8TfJiXn1y+3GCc+9hVeEwRcY5STDaE\\nr65EQLMMSK/ejC8fXV+fXM1XfsSSEQESS1t/1+tvEG0bBc08OjMR97bt9fuSCQJc\\n+tzTfOLHlwKBgQCLtrtYw9Qil70Dw98odAv19iE7lof+1PP01XcYjWN2q4iMubHZ\\nLArBjFkpqkHxuGu70WWlKkBak7eAgYZCX8vZy8k2H0r9PgC3ER7a/ah3OmCyYd31\\nMIl+g5o7EXuIFvBkAYsHJt8jl2Emd1hk8n1MArQuleerA99X1DNi1jyNgQKBgF0D\\neQEO6VN+XiHo/r2ia/fQjZUdNkhU0ox6gScBpEE/tHw2Rf7Cf1MBMSOezH4Cu/G3\\n6W4VmCXMT0SMREArKPIep4nIDCSF1LAZ5sOyWOgLS3LPwLOqHUI/1GEK1sEy349v\\n0n3nCR7Ql/pN3JUkyFdftVmtTlzLFFMDcd8iBKnvAoGAKpaJPlTL3c2+cHH8z39s\\nbfGZc72tvDWdq8+TfKoyCuQsXLI953mR6c/pNMcCUbHzdCe+tc4ArhO9u0l0pixV\\noDzkZVrUaHMYBoMXvptXTIRa16xGF+cNMGRkei9dzucI+3ShlYhVxhi3ZoGVfsEn\\nOSLom2RFMQ7NgUDxzcgMn5w=\\n-----END PRIVATE KEY-----\\n","client_email":"firebase-adminsdk-vlc5q@tu-pc-gamer.iam.gserviceaccount.com","client_id":"106489220389004741684","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-vlc5q%40tu-pc-gamer.iam.gserviceaccount.com"}')}},e={};!function o(r){var c=e[r];if(void 0!==c)return c.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,o),n.exports}(519)})();